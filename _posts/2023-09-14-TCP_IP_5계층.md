---

layout: post
title: TCP/IP 5계층
date: 2023-09-14 00:00:00 +0800
categories: [CS Study, Sophomore]
tags: [network]
pin: true

---

&#128203;TCP/IP Protocol Suite
==============================
***
인터넷 프로토콜 스위트(Internet Protocol Suite)는 인터넷에서 컴퓨터들이 서로 정보를 주고받는 데 쓰이는 통신규약(프로토콜)의 모음이다. 인터넷 프로토콜 슈트 중 TCP와 IP가 가장 많이 쓰이기 때문에 TCP/IP 프로토콜 슈트라고도 불린다.

&#128204;TCP/IP Protocol Suite의 계층 구조
=======================================
***

| layer 5 | 응용 계층 (Application Layer) |
| layer 4 | 전송 계층 (Transport Layer) |
| layer 3 | 네트워크 계층 (Network Layer) |
| layer 2 | 링크 계층 (Data Link Layer) |
| layer 1 | 물리 계층 (Physical Layer) |

 인터넷에 연결된 모든 디바이스들은 위의 5계층을 거쳐 데이터를 주고받는다.
 물리 계층부터 응용 계층까지 각 단계들이 왜 필요한지, 어떻게 동작하는지 설명해보자.



&#128206;Layer 1 : 물리 계층 (Physical Layer)
-------------------------------------------
***

### 신호 변환
컴퓨터는 0과 1의 정보만을 가지고 모든 것을 표현한다. 그런데 우리가 이러한 정보를 물리적 신호(파형, 빛 등)를 통해 전달해야하는데, 물리 계층은 이를 변환하여 멀리 떨어진 곳까지 정보를 송신할 수 있도록 해주는 계층이다.

<img src="https://images.unsplash.com/photo-1604869515882-4d10fa4b0492?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=3417&q=80" width="450px" height="300px" title="px(픽셀) 크기 설정" alt="RubberDuck"><br/>

특히 광통신은 전세계적으로 연결되어있는 광케이블을 이용하기 때문에 지구 반대편에서 송신된 정보를 0.2초만에 받을 수 있다. 진공상태에서는 약 0.13초가 걸리지만, 광섬유의 굴절과 반사로 인해 30~40% 정도 지연되어 0.2초가 걸린다. 

광통신에서는 0(빛이 흐르지 않는다), 1(빛이 흐른다)로 컴퓨터의 0과 1의 정보와 유사하기 때문에, 변환하는 과정이 단순하다.
하지만, 공중에 떠다니는 파장을 잡아 원하는 정보를 찾아서 변환하는 과정은 조금 복잡하다. 수많은 파형들이 중첩되어있는 복잡한 파형에서 기본적인 주기함수인 사인함수와 코사인 함수의 조합으로 변환하는 과정(푸리에 변환)이 필요한데, 그 과정 역시 물리 계층에 포함된다.


&#128206;Layer 2 : 링크 계층 (Data Link Layer)
--------------------------------------------
***

### 데이터그램(datagram) -> 프레임(frame)
TCP/IP 인터넷에서 기본 전송 단위를 데이터그램(datagram)이라고 하는데, 3계층에 해당하는 네트워크 계층에서 데이터그램을 가져와 링크를 통해 이동시킨다. 이때 라우터는 최상의 링크를 선택해 전송하게되고, 인터넷은 이렇게 라우터에 의해 연결된 수많은 링크로 구성된다(3계층). 이더넷(Ethernet), 무선 LAN, 유선 WAN, 무선 WAN(LTE, 5G NR)이 이에 해당한다. 따라서 2계층에서는 데이터그램을 가져와 프레임(frame)이라는 패킷에 캡슐화시킨다. 

### 에러 제어
링크 계층에서는 에러를 감지하고 처리하는 역할도 한다. 전기적 신호들은 외부 영향에 따라 물리적 손실과 전기적 신호 변형에 매우 취약한데, 수신 과정에서 1계층에서의 전기적 신호를 프레임(frame)화 하는 과정에서 에러를 검출하고 처리한다. 

&#128206;Layer 3 : 네트워크 계층 (Network Layer)
---------------------------------------------
***

네트워크 계층은 호스트간 통신과, 가능한 경로를 통해 패킷을 라우팅 한다. 따라서 네트워크 간의 통신은 호스트 간의 통신이 되며, 각 패킷에 대한 최상의 경로를 제공하는 역할을 한다. 이때 이동하는 정보의 전송 단위인 데이터그램은 소프트웨어적으로 처리되며, 그 형식과 내용이 하드웨어적으로 제약을 받지 않는다. 그렇기 때문에 송수신의 매개체인 라우터는 소프트웨어 처리 장치라고 할 수 있다.

### 인터넷 프로토콜(IP)
우리가 평소에 알고있는 IP 주소는 3계층에서 처음 등장한 개념이다. 라우팅이 진행되기 위해선 목적지와 경로의 주소가 필요한데, 이때 등장한 개념이 IP인 것이다. 3계층에서는 이러한 주소의 데이터 구조를 갖추어서 IP 해더를 붙힌다.


&#128206;Layer 4 : 전송 계층 (Transport Layer)
--------------------------------------------
***
응용 계층(Application Layer)에서 메세지를 받아 이를 전송 계층의 패킷에 캡슐화하여 전송한다. 이렇게 전송되는 4계층의 단위를 세그먼트(segment) 혹은 사용자 데이터그램(user datagram)이라고 부른다.

### 전송 제어 프로토콜(TCP)
TCP는 연결형 프로토콜로써, 데이터의 흐름을 전송하기 위해 두 TCP 사이에 논리적 연결을 생성한다. 
* 흐름 제어(Flow Control)
호스트가 전송한 원본 데이터의 속도를 대상 호스트의 수신 데이터 속도와 일치시켜서 흐름을 제어한다.
* 오류 제어(Error Control)
세그먼트가 오류 없이 목적지에 도착하도록 보장하고, 손상된 세그먼트를 재전송한다. 2계층(링크 계층)에서도 에러를 감지하고 처리했는데, 4계층에서도 반복하는 이유는 에러를 아무리 체크해도 100% 잡을 수 없기 때문에 이러한 과정을 반복하여 확률을 줄이는 것이다. 일반적으로 TCP는 충분히 낮은 에러 확률을 통해 신뢰성을 보장해준다. 
* 혼잡 제어(Congestion Control)
네트워크 혼잡으로 인한 세그먼트의 손실을 감소시킨다.

### 사용자 데이터그램 프로토콜(UDP)
UDP는 TCP와는 다르게 비연결형 프로토콜로써, TCP에서는 흐름을 제어하여 전송 순서가 보장되지만, UDP에서는 전송 순서가 바뀔 수도 있다. 또한 수신 여부를 확인하지 않으므로, 오류를 발견하지 못할 확률이 더 높고 신뢰성이 낮다. 그렇다고 UDP가 TCP보다 쓸모가 없는 것은 아니다. 이러한 과정이 없는 만큼 데이터의 전송 속도가 TCP보다 빠르기 때문이다. 어떻게 활용되는지에 따라 TCP를 사용할지, UDP를 사용할지가 달라진다.

따라서, TCP는 중요한 정보나 신뢰성 확보가 필요한 전송을 할 때, 즉 웹 페이지 접속(HTTP/HTTPS), 메일, 터미널 접속 등에 활용되며, UDP는 실시간으로 빠른 정보를 전송해야할 때, 즉 실시간 스트리밍, 음성 전화 등에 활용된다. 

&#128206;Layer 5 : 응용 계층 (Application Layer)
----------------------------------------------
***
